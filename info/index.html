<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rapport d'Intelligence Numérique | CONFIDENTIEL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Roboto+Mono:wght@400;500&display=swap');

        body {
            font-family: 'Rajdhani', sans-serif;
            background-color: #0B1120; /* Deep Navy Background */
            color: #E2E8F0;
        }

        .font-mono {
            font-family: 'Roboto Mono', monospace;
        }

        /* Chart Container Styling - Mandatory Requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Tailwind max-w-2xl equiv roughly */
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1E293B;
        }
        ::-webkit-scrollbar-thumb {
            background: #38BDF8;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #0EA5E9;
        }

        /* Material Design / Cyber Aesthetics */
        .card {
            background-color: #1E293B; /* Slate 800 */
            border: 1px solid #334155;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -1px rgba(0, 0, 0, 0.3);
            border-radius: 0.75rem; /* rounded-xl */
        }
        
        .neon-text {
            text-shadow: 0 0 5px rgba(56, 189, 248, 0.5);
        }

        .neon-border {
            border-color: #38BDF8;
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.2);
        }
    </style>

    <!-- Chosen Palette: "Cyber Intelligence" (Deep Navy #0B1120, Slate #1E293B, Electric Blue #38BDF8, Neon Purple #A855F7, Alert Red #EF4444) -->
    
    <!-- Application Structure Plan:
         1. Header: Classification Banner & Title.
         2. Executive Summary: Big Numbers & Status (Threat Level).
         3. Analysis Section 1 (Composition): Attack Vectors (Donut Chart).
         4. Analysis Section 2 (Trend): Traffic & Intrusions over time (Line Chart).
         5. Deep Dive (Comparison): Node Vulnerability Scores (Radar Chart).
         6. Geo-Tracking (Organization/Ranking): Top Origin Sources (Horizontal Bar).
         7. Process Logic (Flow): Encryption Protocol Steps (HTML Flowchart).
         8. Conclusion: Final Status.
         Narrative flows from high-level alert status -> specific threat breakdown -> source tracking -> defensive posture.
    -->

    <!-- Visualization & Content Choices:
         1. Threat Level -> Goal: Inform. -> Viz: Big Number/Gauge style CSS. -> Justification: Immediate impact.
         2. Attack Vectors -> Goal: Compare (Part-to-whole). -> Viz: Chart.js Donut. -> Interaction: Tooltip. -> Justification: Shows composition of threats clearly.
         3. Traffic Spike -> Goal: Change (Over time). -> Viz: Chart.js Line. -> Interaction: Hover points. -> Justification: Visualizes the "incident" timeline mentioned in source context.
         4. Node Health -> Goal: Compare (Multivariate). -> Viz: Chart.js Radar. -> Justification: Compares integrity, encryption, latency across nodes.
         5. Source Origins -> Goal: Organize (Rank). -> Viz: Chart.js Horizontal Bar. -> Justification: Readable ranking of long country/IP labels.
         6. Protocol Flow -> Goal: Organize (Process). -> Viz: HTML/Tailwind Flex Flow. -> Justification: SVG prohibited, Mermaid prohibited.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

</head>
<body class="antialiased min-h-screen pb-12">

    <!-- Header / Classification Banner -->
    <header class="bg-red-900/20 border-b border-red-900/50 p-2 text-center sticky top-0 z-50 backdrop-blur-md">
        <span class="text-red-500 font-mono font-bold tracking-[0.2em] animate-pulse">CLASSIFICATION: CONFIDENTIEL // YANNKEEP-OUAISFIEU</span>
    </header>

    <div class="container mx-auto px-4 mt-8 max-w-6xl">
        
        <!-- Intro Section -->
        <section class="mb-12 text-center">
            <h1 class="text-5xl md:text-6xl font-bold text-white mb-4 neon-text">RAPPORT D'INTELLIGENCE</h1>
            <p class="text-xl text-slate-400 max-w-3xl mx-auto">
                Analyse forensique des infrastructures critiques. Ce document interactif détaille les anomalies détectées, les vecteurs d'intrusion et l'état des contre-mesures cryptographiques.
            </p>
        </section>

        <!-- KPI Grid -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
            <!-- KPI 1 -->
            <div class="card p-6 text-center transform hover:scale-105 transition-transform duration-300">
                <h3 class="text-slate-400 text-sm font-bold uppercase tracking-widest mb-2">Statut du Système</h3>
                <div class="text-5xl font-bold text-emerald-400 mb-2">SÉCURISÉ</div>
                <p class="text-xs text-slate-500">Chiffrement AES-256 actif</p>
            </div>
            <!-- KPI 2 -->
            <div class="card p-6 text-center transform hover:scale-105 transition-transform duration-300">
                <h3 class="text-slate-400 text-sm font-bold uppercase tracking-widest mb-2">Tentatives d'Intrusion</h3>
                <div class="text-5xl font-bold text-sky-400 mb-2">1,248</div>
                <p class="text-xs text-slate-500">Dernières 24 heures</p>
            </div>
            <!-- KPI 3 -->
            <div class="card p-6 text-center transform hover:scale-105 transition-transform duration-300 border-red-900/50">
                <h3 class="text-slate-400 text-sm font-bold uppercase tracking-widest mb-2">Niveau de Menace</h3>
                <div class="text-5xl font-bold text-purple-400 mb-2">BRAVO</div>
                <p class="text-xs text-slate-500">Surveillance accrue requise</p>
            </div>
        </section>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
            
            <!-- Analysis 1: Threat Composition (Donut) -->
            <article class="card p-6 flex flex-col">
                <div class="mb-4 border-l-4 border-sky-500 pl-4">
                    <h2 class="text-2xl font-bold text-white">Vecteurs d'Attaque</h2>
                    <p class="text-slate-400 text-sm mt-1">
                        Analyse de la répartition des tentatives de compromission par type de charge utile.
                        La prédominance des injections SQL suggère une attaque ciblée sur les bases de données héritées.
                    </p>
                </div>
                <div class="flex-grow flex items-center justify-center bg-slate-900/50 rounded-lg p-4">
                    <!-- Chart Container -->
                    <div class="chart-container">
                        <canvas id="threatDonutChart"></canvas>
                    </div>
                </div>
                <div class="mt-4 text-center text-xs text-slate-500 font-mono">
                    Fig 1.1 - Spectrométrie des menaces entrantes
                </div>
            </article>

            <!-- Analysis 2: Temporal Trends (Line) -->
            <article class="card p-6 flex flex-col">
                <div class="mb-4 border-l-4 border-purple-500 pl-4">
                    <h2 class="text-2xl font-bold text-white">Flux de Données & Anomalies</h2>
                    <p class="text-slate-400 text-sm mt-1">
                        Corrélation temporelle entre le trafic légitime (bleu) et les paquets malformés (violet).
                        Notez le pic de latence à 14:00, correspondant à la tentative d'exfiltration.
                    </p>
                </div>
                <div class="flex-grow flex items-center justify-center bg-slate-900/50 rounded-lg p-4">
                    <!-- Chart Container -->
                    <div class="chart-container">
                        <canvas id="trafficLineChart"></canvas>
                    </div>
                </div>
                <div class="mt-4 text-center text-xs text-slate-500 font-mono">
                    Fig 1.2 - Chronologie de l'incident "OuaisFieu"
                </div>
            </article>
        </div>

        <!-- Full Width Section: Radar & Geo -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
            
            <!-- Radar Chart: Node Health -->
            <article class="card p-6 lg:col-span-1">
                <div class="mb-4 border-l-4 border-emerald-500 pl-4">
                    <h2 class="text-xl font-bold text-white">Intégrité des Nœuds</h2>
                    <p class="text-slate-400 text-sm mt-1">
                        Comparatif des performances de sécurité des serveurs principaux.
                    </p>
                </div>
                <div class="bg-slate-900/50 rounded-lg p-2">
                     <div class="chart-container" style="height: 300px;">
                        <canvas id="radarNodeChart"></canvas>
                    </div>
                </div>
            </article>

            <!-- Horizontal Bar: Origins -->
            <article class="card p-6 lg:col-span-2">
                <div class="mb-4 border-l-4 border-red-500 pl-4">
                    <h2 class="text-xl font-bold text-white">Origine Géographique des Signaux</h2>
                    <p class="text-slate-400 text-sm mt-1">
                        Identification des proxys utilisés pour masquer l'emplacement réel de l'attaquant.
                        Les étiquettes longues ont été traitées pour une lisibilité optimale.
                    </p>
                </div>
                <div class="bg-slate-900/50 rounded-lg p-4">
                    <div class="chart-container">
                        <canvas id="geoBarChart"></canvas>
                    </div>
                </div>
            </article>
        </div>

        <!-- Process Flow (HTML/CSS - NO SVG) -->
        <section class="card p-8 mb-12">
            <h2 class="text-2xl font-bold text-white mb-8 text-center neon-text">Protocole de Confinement Actif</h2>
            
            <div class="flex flex-col md:flex-row justify-between items-center space-y-8 md:space-y-0 relative">
                <!-- Connector Line (CSS) -->
                <div class="hidden md:block absolute top-1/2 left-0 w-full h-1 bg-gradient-to-r from-sky-900 via-sky-500 to-sky-900 -z-10 transform -translate-y-1/2"></div>

                <!-- Step 1 -->
                <div class="flex flex-col items-center bg-slate-900 p-4 rounded-lg border border-sky-500/30 z-10 w-48 shadow-[0_0_15px_rgba(14,165,233,0.3)]">
                    <div class="h-10 w-10 rounded-full bg-sky-500 flex items-center justify-center text-white font-bold mb-3">1</div>
                    <h4 class="text-sky-400 font-bold mb-1">DÉTECTION</h4>
                    <p class="text-xs text-center text-slate-400">Analyse heuristique des paquets entrants</p>
                </div>

                <!-- Arrow Right (Unicode) -->
                <div class="md:hidden text-sky-500 text-2xl">▼</div>
                
                <!-- Step 2 -->
                <div class="flex flex-col items-center bg-slate-900 p-4 rounded-lg border border-purple-500/30 z-10 w-48 shadow-[0_0_15px_rgba(168,85,247,0.3)]">
                    <div class="h-10 w-10 rounded-full bg-purple-500 flex items-center justify-center text-white font-bold mb-3">2</div>
                    <h4 class="text-purple-400 font-bold mb-1">ISOLATION</h4>
                    <p class="text-xs text-center text-slate-400">Cloisonnement du sous-réseau "YannKeep"</p>
                </div>

                <!-- Arrow Right (Unicode) -->
                <div class="md:hidden text-purple-500 text-2xl">▼</div>

                <!-- Step 3 -->
                <div class="flex flex-col items-center bg-slate-900 p-4 rounded-lg border border-emerald-500/30 z-10 w-48 shadow-[0_0_15px_rgba(16,185,129,0.3)]">
                    <div class="h-10 w-10 rounded-full bg-emerald-500 flex items-center justify-center text-white font-bold mb-3">3</div>
                    <h4 class="text-emerald-400 font-bold mb-1">NEUTRALISATION</h4>
                    <p class="text-xs text-center text-slate-400">Contre-mesures & banissement IP</p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-slate-600 text-sm py-8 border-t border-slate-800">
            <p class="mb-2">DOCUMENT GÉNÉRÉ PAR LE NOYAU D'IA CENTRAL</p>
            <p>CONFIDENTIEL © 2026 // NE PAS DISTRIBUER SANS ACCRÉDITATION DE NIVEAU 4</p>
        </footer>

    </div>

    <script>
        // --- UTILITIES ---
        
        // Label Wrapping Logic (Mandatory for < 16 chars per line)
        function wrapLabel(str, maxLen = 16) {
            if (str.length <= maxLen) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= maxLen) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // Shared Tooltip Configuration (Mandatory)
        const commonTooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- CHART GENERATION ---

        document.addEventListener('DOMContentLoaded', () => {
            
            // 1. Threat Composition (Donut)
            const donutLabels = [
                'Injections SQL Avancées', 
                'Attaques par Déni de Service (DDoS)', 
                'Phishing & Ingénierie Sociale', 
                'Malware Zero-Day'
            ].map(l => wrapLabel(l));

            new Chart(document.getElementById('threatDonutChart'), {
                type: 'doughnut',
                data: {
                    labels: donutLabels,
                    datasets: [{
                        data: [45, 25, 20, 10],
                        backgroundColor: ['#0EA5E9', '#A855F7', '#10B981', '#F43F5E'], // Sky, Purple, Emerald, Rose
                        borderColor: '#0B1120',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom', labels: { color: '#94A3B8', font: { size: 10 } } },
                        tooltip: commonTooltipConfig
                    }
                }
            });

            // 2. Traffic Trends (Line)
            const lineLabels = ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '23:59'];
            
            new Chart(document.getElementById('trafficLineChart'), {
                type: 'line',
                data: {
                    labels: lineLabels,
                    datasets: [
                        {
                            label: 'Trafic Légitime',
                            data: [120, 130, 250, 400, 380, 450, 200],
                            borderColor: '#38BDF8', // Sky 400
                            backgroundColor: 'rgba(56, 189, 248, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: 'Anomalies Détectées',
                            data: [5, 2, 8, 15, 120, 15, 5], // Spike at 16:00
                            borderColor: '#A855F7', // Purple 500
                            backgroundColor: 'rgba(168, 85, 247, 0.2)',
                            borderWidth: 2,
                            borderDash: [5, 5],
                            tension: 0.2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { labels: { color: '#CBD5E1' } },
                        tooltip: commonTooltipConfig
                    },
                    scales: {
                        y: {
                            grid: { color: '#334155' },
                            ticks: { color: '#94A3B8' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#94A3B8' }
                        }
                    }
                }
            });

            // 3. Node Health (Radar)
            new Chart(document.getElementById('radarNodeChart'), {
                type: 'radar',
                data: {
                    labels: ['Latence', 'Chiffrement', 'Intégrité', 'Uptime', 'Conformité'],
                    datasets: [{
                        label: 'Nœud Alpha',
                        data: [90, 85, 95, 99, 80],
                        borderColor: '#10B981',
                        backgroundColor: 'rgba(16, 185, 129, 0.2)',
                        borderWidth: 2
                    }, {
                        label: 'Nœud Beta (Compromis)',
                        data: [40, 30, 60, 85, 40],
                        borderColor: '#F43F5E',
                        backgroundColor: 'rgba(244, 63, 94, 0.2)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#475569' },
                            grid: { color: '#334155' },
                            pointLabels: { color: '#CBD5E1', font: { size: 10 } },
                            ticks: { display: false }
                        }
                    },
                    plugins: {
                        legend: { position: 'top', labels: { color: '#CBD5E1', font: { size: 10 } } },
                        tooltip: commonTooltipConfig
                    }
                }
            });

            // 4. Origins (Horizontal Bar)
            // Long labels to demonstrate wrapping logic requirement
            const rawGeoLabels = [
                'Fédération de Russie (Proxy SVR)',
                'République Populaire de Chine (Shenzhen)',
                'États-Unis d\'Amérique (Virginie du Nord)',
                'République Fédérale d\'Allemagne (Berlin)',
                'Royaume de Belgique (Bruxelles - OuaisFieu)'
            ];
            const geoLabels = rawGeoLabels.map(l => wrapLabel(l, 16));

            new Chart(document.getElementById('geoBarChart'), {
                type: 'bar',
                data: {
                    labels: geoLabels,
                    datasets: [{
                        label: 'Volume de Paquets Malveillants',
                        data: [450, 380, 220, 150, 80],
                        backgroundColor: [
                            '#EF4444', 
                            '#F97316', 
                            '#EAB308', 
                            '#84CC16', 
                            '#38BDF8'
                        ],
                        borderRadius: 4
                    }]
                },
                options: {
                    indexAxis: 'y', // Horizontal Bar
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: commonTooltipConfig
                    },
                    scales: {
                        x: {
                            grid: { color: '#334155' },
                            ticks: { color: '#94A3B8' }
                        },
                        y: {
                            grid: { display: false },
                            ticks: { color: '#CBD5E1', font: { size: 10 } }
                        }
                    }
                }
            });

        });
    </script>
</body>
</html>
